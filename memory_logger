#!/bin/bash

# 🛠️ Test Script: Memory Logger
# Author:        Niyaaz Adonis
# Date Created:  2025/06/22
# Last modified: 2025/06/22 @ 13:37

# Description:
# Ensures a “Memory” directory exists in the current working directory,then appends the system’s memory usage to a log file.

# Usage: ./test.sh

echo -e "\n✨  Test Script: Memory Logger ✨\n"
echo "----------------------------------"
echo

# --- Setup variables ---
BASE_DIR="$PWD"
MEMORY_DIR="$BASE_DIR/Memory"
MEMORY_LOG="$MEMORY_DIR/memory.log"

# --- Check for Memory directory ---
if [[ -d "$MEMORY_DIR" ]]; then
    echo "📂  Memory directory exists at: $MEMORY_DIR"
    echo "📝  Will append memory stats to:      $MEMORY_LOG"
else
    mkdir -p "$MEMORY_DIR"
    echo "📂 $MEMORY_DIR did not exist and now has been created:      $MEMORY_DIR"
    echo "📝  Will append memory stats to:      $MEMORY_LOG"
fi

echo

# --- Log memory usage ---
echo "🔄  Logging memory usage..."
free >> "$MEMORY_LOG"
echo "✅  Memory stats logged to:           $MEMORY_LOG"

echo
exit 0
